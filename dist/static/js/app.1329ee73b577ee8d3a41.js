webpackJsonp([1],{"9M+g":function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/5sW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},i,!1,function(t){a("gsu9")},null,null).exports,c=a("/ocq"),r={name:"Home",data:function(){return{qrPath:"/static/pic/qr.jpeg",logoPath:"/static/pic/logo.png",canDownload:!1}},mounted:function(){var t=document.getElementById("canvas"),e=t.getContext("2d"),a=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),n=t.width,i=t.height;t.width=n*a,t.height=i*a,t.style.width=n+"px",t.style.height=i+"px",e.scale(a,a),this.drawRound(e),this.drawImage(e)},methods:{download:function(){var t=this,e=document.getElementById("canvas").toDataURL("image/jpg"),a=document.getElementById("canvas").getContext("2d");a.clearRect(0,0,300,300),a.fillStyle="#ffffff",a.fillRect(0,0,300,300),a.fill();var n=new Image;n.onload=function(){var e=t.getCanvasInfo(n,300,300),i=e.dx,o=e.dy,c=e.dWidth,r=e.dHeight;a.drawImage(n,-i,-o,c,r);var d=document.createElement("a");d.href=document.getElementById("canvas").toDataURL("image/png"),d.download="1.png",d.click()},n.src=e},drawBack:function(t){t.fillStyle="#ffffff",t.fillRect(0,0,300,300)},drawRound:function(t){t.fillStyle="#ececec",t.arc(150,145,130,0,360),t.fill()},drawImage:function(t){t.globalCompositeOperation="source-over";var e=new Image;e.onload=function(){t.drawImage(e,250,250,40,40)},e.src=this.qrPath;var a=new Image;a.onload=function(){t.drawImage(a,10,260,a.width/50,a.height/50)},a.src=this.logoPath},open:function(){document.getElementById("takepicture").click()},setImagePreview:function(t){var e=this,a=new Image;a.onload=function(){var t=document.getElementById("canvas").getContext("2d");t.clearRect(0,0,300,300),e.drawRound(t),t.globalCompositeOperation="source-atop";var n=e.getCanvasInfo(a,300,300),i=n.dx,o=n.dy,c=n.dWidth,r=n.dHeight;t.drawImage(a,-i,-o,c,r),e.drawImage(t),e.canDownload=!0};var n=window.URL||window.webkitURL;a.src=n.createObjectURL(t.target.files[0])},getCanvasInfo:function(t,e,a){var n=t.width,i=t.height,o=0,c=0;return n>i?(c=a,(o=n/(i/a))<e&&(o=e,c=i/(n/e))):(o=e,(c=i/(n/e))<a&&(c=a,o=n/(i/a))),{dx:(o-e)/2,dy:(c-a)/2,dWidth:o,dHeight:c}}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v("无境书茶2019日历工具")]),t._v(" "),a("canvas",{attrs:{id:"canvas",width:"300",height:"300"}}),t._v(" "),a("canvas",{attrs:{id:"canvas2",width:"300",height:"300",hidden:""}}),t._v(" "),a("div",{staticStyle:{padding:"10vw"}},[a("b-button",{attrs:{disabled:!t.canDownload,block:"",variant:"success"},on:{click:t.download}},[t._v("下载图片")]),t._v(" "),a("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.open}},[t._v("打开相机")]),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{id:"takepicture",type:"file",accept:"image/*"},on:{change:t.setImagePreview}})],1)])},staticRenderFns:[]};var l=a("VU/8")(r,d,!1,function(t){a("PcYB")},"data-v-516b6d80",null).exports;n.a.use(c.a);var s=new c.a({routes:[{path:"/",name:"Home",component:l}],mode:"history"}),g=a("e6fC"),u=a.n(g);a("Jmt5"),a("9M+g");n.a.config.productionTip=!1,n.a.use(u.a),new n.a({el:"#app",router:s,render:function(t){return t(o)}})},PcYB:function(t,e){},gsu9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1329ee73b577ee8d3a41.js.map